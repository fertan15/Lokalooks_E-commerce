<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>LocaLooks</title>
    <!-- FAVICON -->
     <link rel="icon" href="./img/favicon_io/favicon.ico">
    <!-- FONT -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Cinzel:wght@400..900&family=Cutive&family=Lobster&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Satisfy&family=Staatliches&display=swap" rel="stylesheet">
    <!-- BOXICON -->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- BOOTSTRAP -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- CSS -->
    <link rel="stylesheet" href="shop.css">
  </head>
  <body>
    <div class="all-container">
        <!-- navbar -->
        <nav class="navbar sticky-top navbar-expand-lg bg-dark navbar-dark">
            <div class="container-fluid">
              <!-- Offcanvas Menu Toggler -->
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
              <!-- Logo -->
              <a class="navbar-brand lobster-regular d-block d-lg-inline mb-2 mx-lg-5 mx-auto" style="font-size: 2rem; text-shadow: black 5px 5px; margin-left: 50px;" href="./Home.html">LocaLooks</a>
              <!-- Offcanvas -->
              <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                  <h5 class="offcanvas-title lobster-regular" style="font-size: 3rem;" id="offcanvasNavbarLabel">LocaLooks</h5>
                  <button
                    type="button"
                    class="btn-close"
                    data-bs-dismiss="offcanvas"
                    aria-label="Close"
                  ></button>
                </div>
                <div class="offcanvas-body">
                  <ul class="navbar-nav m-auto mb-2 mb-lg-0" style="margin-right: 50px;">
                    <li class="nav-item ml-3">
                      <a class="nav-link" id="color" aria-current="page" href="./Home.html">Home</a>
                    </li>
                    <li class="nav-item ml-3">
                      <a class="nav-link active" id="color" href="./shop.html">Shop</a>
                    </li>
                    <li class="nav-item ml-3">
                      <a class="nav-link" id="color" href="./about.html">About Us</a>
                    </li>
                    <li class="nav-item ml-3">
                      <a class="nav-link position-relative" id="color" href="./game.html" data-bs-toggle="popover" title="Play, Win, Repeat! Limited-Time Mini Games Are Here!" data-bs-content="Step into the excitement with our exclusive limited-time mini games!">Mini Game</a>
                    </li>
                  </ul>
                </div>
              </div>    
              <!-- Cart Icon -->
              <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                  <a class="nav-link position-relative" style="font-size: 2rem; margin-right: 50px;" aria-current="page" href="./cart.html">
                    <i class='bx bx-shopping-bag'></i>
                    <span class="position-absolute top-50 start-100 translate-middle-x badge rounded-circle bg-danger" style="font-size: 0.6rem; padding: 0.1rem 0.3rem; min-width: 1rem; height: 1rem; line-height: 0.8rem; transform: translateX(-100%);">
                        0
                        <span class="visually-hidden">Shopping Cart</span>
                    </span>
                  </a>
                </li>
              </ul>
            </div>
          </nav>
        <!-- end navbar -->

         <!--heading banner  -->
        <section id="banner">
            <img src="./img/shopheader.png" alt="Vibrance">
         </section>
        <!-- banner end -->

      <!-- Search Bar -->
      <section id="find">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12 col-md-8 col-lg-6">
              <div class="input-group mb-3">
                <input type="text" class="form-control form-control-lg rounded-pill pe-5" placeholder="Search" id="search">
                <button class="btn btn-primary rounded-pill position-absolute end-0 me-2" type="button">
                  <i class='bx bx-search'></i>
                </button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Category Filter -->
      <section id="category">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-12 col-md-10 col-lg-8">
              <div class="btn-group btn-group-lg d-flex flex-wrap justify-content-center mb-4" role="group" aria-label="Category Filters">
                <button type="button" class="btn btn-outline-primary active mx-2 my-1" data-category="ALL">ALL</button>
                <button type="button" class="btn btn-outline-primary mx-2 my-1" data-category="WOMAN">WOMAN</button>
                <button type="button" class="btn btn-outline-primary mx-2 my-1" data-category="MAN">MAN</button>
                <button type="button" class="btn btn-outline-primary mx-2 my-1" data-category="KIDS">KIDS</button>
                <button type="button" class="btn btn-outline-primary mx-2 my-1" data-category="FOOTWEARS">FOOTWEARS</button>
                <button type="button" class="btn btn-outline-primary mx-2 my-1" data-category="ACCESSORIES">ACCESSORIES</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Product List -->
      <section id="barang">
        <div class="listProduct"></div>
      </section>

      <script>
        let products = null; 
        let displayedProducts = []; 
        const listProduct = document.querySelector('.listProduct');
        const categoryButtons = document.querySelectorAll('#category .btn');
        const searchInput = document.getElementById('search');

        function getQueryParam(param) {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get(param);
        }

        function displayProducts(filteredProducts) {
          listProduct.innerHTML = '';
          if (filteredProducts.length === 0) {
            listProduct.innerHTML = '<p style = "font-size: 3vw; font-family: "Staatliches";">No products found.</p>'; 
          } else {
            filteredProducts.forEach(product => {
              const newProduct = document.createElement('a');
              newProduct.href = 'detail.html?id=' + product.id;
              newProduct.classList.add('item');
              newProduct.innerHTML = `
                <div class="card" style="width: 18rem;">
                  <img src="${product.image}" class="card-img-top" alt="${product.name}">
                  <div class="card-body">
                    <p  class="brand-name">${product.brand}</p>
                    <h5  class="baju">${product.name}</h5>
                    <p class="card-text"></p>
                  </div>
                  <div id="harga" class="card-body">
                    ${product.price}
                  </div>
                </div>
              `;
              listProduct.appendChild(newProduct);
            });
          }
        }

        // ini json nya aku hosting soalnya kalo ga kena cors policy
        fetch('https://fertan15.github.io/fileapi_product/products.json')
          .then(response => response.json())
          .then(data => {
            products = data;
            displayedProducts = products;

            const initialCategory = getQueryParam('category');
            if (initialCategory) {
              displayedProducts = products.filter(product =>
                product.category.some(cat => cat.toUpperCase() === initialCategory.toUpperCase())
              );

              categoryButtons.forEach(button => {
                if (button.getAttribute('data-category') === initialCategory.toUpperCase()) {
                  button.classList.add('active');
                } else {
                  button.classList.remove('active');
                }
              });
            }

            displayProducts(displayedProducts);
          })
          .catch(error => console.error('Error fetching products:', error));

        categoryButtons.forEach(button => {
          button.addEventListener('click', () => {
            const selectedCategory = button.getAttribute('data-category');

            categoryButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            displayedProducts =
              selectedCategory === 'ALL'
                ? products
                : products.filter(product =>
                    product.category.some(cat => cat.toUpperCase() === selectedCategory)
                  );

            const searchTerm = searchInput.value.toLowerCase();
            const finalFilteredProducts = displayedProducts.filter(product =>
              product.name.toLowerCase().includes(searchTerm) ||
              product.brand.toLowerCase().includes(searchTerm) ||
              product.description.toLowerCase().includes(searchTerm)
            );

            displayProducts(finalFilteredProducts);
          });
        });

        searchInput.addEventListener('input', () => {
          const searchTerm = searchInput.value.toLowerCase();

          const filteredProducts = displayedProducts.filter(product =>
            product.name.toLowerCase().includes(searchTerm) ||
            product.brand.toLowerCase().includes(searchTerm)
          );

          displayProducts(filteredProducts);
        });
      </script>
      <!-- end of product dkk -->

      <!-- register email -->
      <section id="reg" class="py-5 bg-dark text-white">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-md-8 col-lg-6 text-center">
              <h2 class="mb-4 lobster-regular">Register for News and Offers</h2>
              <form id="emailForm" onsubmit="return validateEmail()">
                <div class="input-group mb-3">
                  <input type="email" name="subs" id="subs" class="form-control form-control-lg rounded-pill" placeholder="Enter Your Email" required>
                  <button class="btn btn-primary rounded-pill" type="submit" id="submit">
                    <i class='bx bx-paper-plane'></i> Send
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </section>

      <!-- Email Registered Modal -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Email Registered</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              Thank you for subscribing! You're now part of our exclusive circle. Stay tuned for updates, special offers, and exciting news coming your way!
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <!-- ini js -->
      <script>
        document.getElementById("submit").addEventListener('click', function(event) {
          event.preventDefault();
          validateEmail();
        });

        function validateEmail() {
          var email = document.getElementById("subs").value;
          var modalContainer = document.getElementById("mod");

          if (email.trim() != "") {
            var myModal = new bootstrap.Modal(document.getElementById('staticBackdrop'), {
              keyboard: false
            });
            myModal.show();

            document.getElementById("subs").value = "";
          } else {
            alert("Please enter a valid email address.");
          }
        }
      </script>
          <!-- end register email -->

          <!-- footer -->
          <footer class="footer">
            <div class="footer-container">
                <div class="footer-section about">
                    <h2>About Us</h2>
                    <p style="text-align: justify;">Welcome to LocaLooks, your ultimate destination for curated local fashion. We are a homegrown e-commerce platform that celebrates the beauty, talent, and creativity of local artisans and designers. Our mission is to bring you closer to the unique charm of locally crafted clothing while supporting small businesses and fostering sustainable practices.</p>
                </div>
    
                <div class="footer-section links">
                    <h2>Quick Links</h2>
                    <ul>
                        <li><a href="./Home.html">Home</a></li>
                        <li><a href="./shop.html">Shop</a></li>
                        <li><a href="./about.html">About Us</a></li>
                        <li><a href="./game.html">Mini Game</a></li>
                    </ul>
                </div>
    
                <div class="footer-section contact">
                    <h2>Contact Us</h2>
                    <ul>
                        <li>Email: support@localooks.com</li>
                        <li>Phone: +123 456 7890</li>
                    </ul>
                </div>
    
                <div class="footer-section social">
                    <h2>Follow Us</h2>
                    <div class="social-icons">
                        <a href="https://www.facebook.com/"><i class='bx bxl-facebook-circle'></i></a>
                        <a href="https://www.instagram.com/"><i class='bx bxl-instagram-alt'></i></a>
                        <a href="https://www.whatsapp.com/"><i class='bx bxl-whatsapp-square'></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 LocaLooks</span>. All Rights Reserved.</p>
            </div>
        </footer>
        <!-- end footer -->
    </div>


        <script>
          let cart = [];
          function loadCart() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
              cart = JSON.parse(savedCart);
              updateCartCount();
            }
          }

          function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
          }

          function updateCartCount() {
            const cartCount = document.querySelector('.badge');
            if (cartCount) {
              cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);
            }
          }

          function addToCart() {
            if (!selectedSize) {
              alert('Please select a size before adding to cart!');
              return;
            }

            const quantity = parseInt(document.getElementById('quantity-input').value);
            if (quantity < 1) {
              alert('Please select a valid quantity!');
              return;
            }

            const productId = new URLSearchParams(window.location.search).get('id');
            const product = products.find(p => p.id == productId);
            
            if (!product) {
              alert('Product not found!');
              return;
            }

            const cartItem = {
              id: product.id,
              name: product.name,
              price: product.price,
              size: selectedSize,
              quantity: quantity,
              image: product.image
            };

            const existingItemIndex = cart.findIndex(item => 
              item.id === cartItem.id && item.size === cartItem.size
            );

            if (existingItemIndex !== -1) {
              cart[existingItemIndex].quantity += quantity;
            } else {
              cart.push(cartItem);
            }
            saveCart();
            alert(`Added to cart: ${cartItem.name} (Size: ${cartItem.size}) x${cartItem.quantity}`);
          }
          document.addEventListener('DOMContentLoaded', loadCart);
    </script>

    <!-- BOOTSTRAP -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  </body>
</html>
